{
  "profile_name": "event_v1",
  "storage": {
    "sqlite_path": "D:/原本/Aその2/てすとじょう/実データ/event.db",
    "attachments_base": "D:/原本/Aその2/てすとじょう/実データ/event"
  },
  "entities": [
    { "entity_id": "event", "label": "イベント", "source": { "table": "event" },
      "fields": [
        { "field_id": "id", "label": "ID", "type": "pk", "source": { "column": "id" } },
        { "field_id": "path", "label": "ファイルパス", "type": "file_path", "source": { "column": "path" } },
        { "field_id": "title", "label": "タイトル", "type": "text", "source": { "column": "title" } },
        { "field_id": "date", "label": "日付", "type": "date", "source": { "column": "date" } },
        { "field_id": "basyotokatati", "label": "場所と形", "type": "text", "source": { "column": "basyotokatati" } },
        { "field_id": "imiduke", "label": "意味づけ", "type": "select", "options_json": ["ポジティブ","ニュートラル","ネガティブ"],  "source": { "column": "imiduke" } },
        { "field_id": "info", "label": "情報", "type": "text", "source": { "column": "info" } },
        { "field_id": "yobi", "label": "よび", "type": "text", "source": { "column": "yobi" } },
        { "field_id": "yobi2", "label": "よび２", "type": "long_text", "source": { "column": "yobi2" } }
      ]
    },
    { "entity_id": "tags", "label": "タグ", "source": { "table": "tags" },
      "fields": [
        { "field_id": "id", "label": "ID", "type": "pk", "source": { "column": "id" } },
        { "field_id": "name", "label": "タグ名", "type": "text", "source": { "column": "name" } }
      ]
    },
    { "entity_id": "sender", "label": "差出人", "source": { "table": "sender" },
      "fields": [
        { "field_id": "id", "label": "ID", "type": "pk", "source": { "column": "id" } },
        { "field_id": "sender_name", "label": "名前", "type": "text", "source": { "column": "sender_name" } },
        { "field_id": "sex", "label": "性別", "type": "select", "options_json": ["男性","女性","法人"], "source": { "column": "sex" } },
        { "field_id": "age", "label": "年代", "type": "text", "source": { "column": "age" } },
        { "field_id": "mbti", "label": "MBTI", "type": "text", "source": { "column": "mbti" } },
        { "field_id": "kankei", "label": "関係", "type": "text", "source": { "column": "kankei" } },
        { "field_id": "info", "label": "情報", "type": "text", "source": { "column": "info" } }
      ]
    }
  ],
  "relations": [
    { "relation_id": "eve_tag", "label": "イベントのタグ", "type": "many_to_many",
      "left_entity": "event", "right_entity": "tags",
      "through": { "table": "eve_tag", "left_key": "eve_id", "right_key": "tag_id" },
      "lookups": [ { "into_field_id": "tag_list", "from": "tags.name", "display": "comma_join" },
                   { "into_field_id": "eve_list", "from": "event.title", "display": "comma_join" }
                 ]
    },
    { "relation_id": "eve_snd", "label": "イベントの差出人", "type": "many_to_many",
      "left_entity": "event", "right_entity": "sender",
      "through": { "table": "eve_snd", "left_key": "eve_id", "right_key": "snd_id" },
      "lookups": [ { "into_field_id": "snd_list", "from": "sender.sender_name", "display": "comma_join" },
                   { "into_field_id": "eve_list", "from": "event.title", "display": "comma_join" }
                 ]
    }
  ],
  "views": [
    { "view_id": "event_table", "entity_id": "event", "type": "table",
      "columns": ["title","date","info","snd_list","tag_list"],
      "filters": {
        "logic": "AND",
        "clauses": []
    },
      "sort": [ { "field": "date", "dir": "DESC" } ],
      "display_props": {
        "preview": {
          "field": "path",
          "column_index": 3,
          "width": 240,
          "text_chars": 240
        },
        "column_widths": {
          "title": 200,
          "date": 200,
          "info": 200,
          "snd_list": 200,
          "tag_list": 300
        }
      }
    },
    { "view_id": "event_cards", "entity_id": "event", "type": "card",
      "card": { "title_field": "title", "subtitle_field": "basyotokatati", "media_field": "path",
        "chips": ["tag_list","date"] }
    },
    { "view_id": "tags_table", "entity_id": "tags", "type": "table",
      "columns": ["id","name","eve_list"], 
      "filters": { "logic": "AND", "clauses": [] },
      "sort": [ { "field": "name", "dir": "ASC" } ]
    },
    { "view_id": "sender_table", "entity_id": "sender", "type": "table",
      "columns": ["id","sender_name","sex","eve_list"], 
      "filters": { "logic": "AND", "clauses": [] },
      "sort": [ { "field": "sender_name", "dir": "ASC" } ]
    }
  ]
}
